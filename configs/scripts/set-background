#!/bin/bash

# Path to your background images directory
BACKGROUND_DIR="$HOME/.config/configs/backgrounds"

# Get the current tag (workspace) index from the first argument
tag=$1

# Calculate the corresponding image index (1-based)
image_index=$((tag + 1))

# Construct the path to the background image
background_image="$BACKGROUND_DIR/bg${image_index}.jpg"

# Function to gradually fade the background
fade_background() {
    local duration=3  # Duration in seconds for the fade
    local steps=30    # Number of steps

    for (( i = 1; i <= steps; i++ )); do
        feh --bg-max --no-fehbg --image-bg "black" --alpha $(( i * 100 / steps )) "$background_image"
        sleep "$(echo "scale=3; $duration / $steps" | bc)"
    done
}

# Call the function to set background with fade effect
fade_background